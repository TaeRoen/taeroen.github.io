<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>TaeRoen&#39;s Blog</title>
  
  
  <link href="/atom.xml" rel="self"/>
  
  <link href="https://taeroen.github.io/"/>
  <updated>2018-09-30T03:21:10.413Z</updated>
  <id>https://taeroen.github.io/</id>
  
  <author>
    <name>TaeRoen</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>helm私有charts仓库进阶</title>
    <link href="https://taeroen.github.io/post/2018-09-kube-helm-repo.html"/>
    <id>https://taeroen.github.io/post/2018-09-kube-helm-repo.html</id>
    <published>2018-09-30T02:31:32.000Z</published>
    <updated>2018-09-30T03:21:10.413Z</updated>
    
    <content type="html"><![CDATA[<h1 id="helm私有charts仓库进阶"><a href="#helm私有charts仓库进阶" class="headerlink" title="helm私有charts仓库进阶"></a>helm私有charts仓库进阶</h1><h2 id="镜像官方仓库"><a href="#镜像官方仓库" class="headerlink" title="镜像官方仓库"></a>镜像官方仓库</h2><p>在了解了chart的基本组成结构之后，自己开始动手开始写chart，这时候还是想找一些官方项目看看。官方仓库里面有很多参考，把官方仓库的熟悉项目的chart都看一遍，跑一遍，再尝试修改一遍，其实也就对chart实际上了解的差不多了，剩下的就是到实际项目中实践了。</p><p>然而官方仓库托管在了google上，这就带来了一个科学上网的问题。本机的还好说，可是服务器上，工具链上就麻烦了，还涉及到内网的问题，所以一开始就想把官方仓库拖下来。</p><p>首先看一下官方仓库的结构，就一个index.yaml，里面是实际tgz包的地址，对托仓库实在是太友好了。</p><p>先把yaml文件下载下来:</p><p></p><p class="code-caption" data-lang="shell" data-line_number="frontend" data-trim_indent="backend" data-label_position="outer" data-labels_left="Code" data-labels_right=":" data-labels_copy="Copy Code"><span class="code-caption-label"></span></p><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"># ADDR_PORT为可以科学上网的http代理的地址 </div><div class="line">export https_proxy=http://$&#123;ADDR_PORT&#125;/</div><div class="line">mkdir helm-mirror &amp;&amp; cd helm-mirror</div><div class="line">wget https://kubernetes-charts.storage.googleapis.com/index.yaml -O offical-index.yaml</div></pre></td></tr></table></figure><p></p><p>看一下yaml文件中chart的下载路径在哪:</p><p></p><p class="code-caption" data-lang="yaml" data-line_number="frontend" data-trim_indent="backend" data-label_position="outer" data-labels_left="Code" data-labels_right=":" data-labels_copy="Copy Code"><span class="code-caption-label"></span></p><br><figure class="highlight yaml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line"><span class="attr">apiVersion:</span> v1</div><div class="line"><span class="attr">entries:</span></div><div class="line"><span class="attr">  acs-engine-autoscaler:</span></div><div class="line"><span class="attr">  - apiVersion:</span> v1</div><div class="line"><span class="attr">    appVersion:</span> <span class="number">2.1</span><span class="number">.1</span></div><div class="line"><span class="attr">    created:</span> <span class="number">2018</span><span class="bullet">-09</span><span class="bullet">-30</span>T01:<span class="number">26</span>:<span class="number">39.918358983</span>Z</div><div class="line"><span class="attr">    description:</span> Scales worker nodes within agent pools</div><div class="line"><span class="attr">    digest:</span> <span class="number">5904</span>caae456eecd1fed0a5d58f4a6f46e1fe97f954c4467e49fc80f91d912a10</div><div class="line"><span class="attr">    home:</span> https://github.com/wbuchwalter/Kubernetes-acs-engine-autoscaler</div><div class="line"><span class="attr">    icon:</span> https://github.com/kubernetes/kubernetes/blob/master/logo/logo.png</div><div class="line"><span class="attr">    maintainers:</span></div><div class="line"><span class="attr">    - email:</span> ritazh@microsoft.com</div><div class="line"><span class="attr">      name:</span> ritazh</div><div class="line"><span class="attr">    - email:</span> wibuch@microsoft.com</div><div class="line"><span class="attr">      name:</span> wbuchwalter</div><div class="line"><span class="attr">    name:</span> acs-engine-autoscaler</div><div class="line"><span class="attr">    sources:</span></div><div class="line"><span class="attr">    - https:</span>//github.com/wbuchwalter/Kubernetes-acs-engine-autoscaler</div><div class="line"><span class="attr">    urls:</span></div><div class="line"><span class="attr">    - https:</span>//kubernetes-charts.storage.googleapis.com/acs-engine-autoscaler<span class="bullet">-2.2</span><span class="number">.0</span>.tgz</div><div class="line"><span class="attr">    version:</span> <span class="number">2.2</span><span class="number">.0</span></div></pre></td></tr></table></figure><p></p><p>下载地址太容易定位了，连yaml解析都懒得弄了，直接grep解决吧:</p><p></p><p class="code-caption" data-lang="shell" data-line_number="frontend" data-trim_indent="backend" data-label_position="outer" data-labels_left="Code" data-labels_right=":" data-labels_copy="Copy Code"><span class="code-caption-label"></span></p><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"># 将所有获取到地址保存到helm-repo.list</div><div class="line">cat offical-index.yaml | grep &quot;tgz&quot; | awk &apos;&#123;print $2&#125;&apos; &gt;&gt; helm-repo.list</div></pre></td></tr></table></figure><p></p><p>下载全部的chart:</p><p></p><p class="code-caption" data-lang="shell" data-line_number="frontend" data-trim_indent="backend" data-label_position="outer" data-labels_left="Code" data-labels_right=":" data-labels_copy="Copy Code"><span class="code-caption-label"></span></p><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">mkdir helm-repo</div><div class="line">cd helm-repo</div><div class="line">wget -c -t 3 -T 30 -i ../helm-repo.list</div></pre></td></tr></table></figure><p></p><p>helm自带命令可以生成index.yaml，这里就不需要使用sed来更改里面的地址了，当然，我这里指定的地址是我演示的地址，按需要换成实际的地址:</p><p></p><p class="code-caption" data-lang="shell" data-line_number="frontend" data-trim_indent="backend" data-label_position="outer" data-labels_left="Code" data-labels_right=":" data-labels_copy="Copy Code"><span class="code-caption-label"></span></p><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">helm repo index helm-repo --url http://127.0.0.1:8001/</div></pre></td></tr></table></figure><p></p><p>启动web服务，这里就直接使用docker启动了nginx服务器:</p><p></p><p class="code-caption" data-lang="shell" data-line_number="frontend" data-trim_indent="backend" data-label_position="outer" data-labels_left="Code" data-labels_right=":" data-labels_copy="Copy Code"><span class="code-caption-label"></span></p><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">docker run -d --name helm-mirror -v $(pwd)/helm-repo:/usr/share/nginx/html -p 8001:80 nginx</div></pre></td></tr></table></figure><p></p><p>最后，测试一下repo，如果执行成功就可以了:</p><p></p><p class="code-caption" data-lang="shell" data-line_number="frontend" data-trim_indent="backend" data-label_position="outer" data-labels_left="Code" data-labels_right=":" data-labels_copy="Copy Code"><span class="code-caption-label"></span></p><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">helm repo add mirror http://127.0.0.1:8001/</div><div class="line">helm repo update</div><div class="line">helm repo fect mirror/mysql</div></pre></td></tr></table></figure><p></p><p>同时，为了方便，下面贴出了上述命令汇总的获取脚本和更新脚本，更改部分变量即可:</p><p></p><p class="code-caption" data-lang="shell" data-line_number="frontend" data-trim_indent="backend" data-label_position="outer" data-labels_left="Code" data-labels_right=":" data-labels_copy="Copy Code"><span class="code-caption-label"></span></p><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line"># fetch.sh</div><div class="line">#!/bin/sh</div><div class="line">https_proxy=your proxy addr</div><div class="line">mkdir helm-mirror</div><div class="line">cd helm-mirror</div><div class="line">wget https://kubernetes-charts.storage.googleapis.com/index.yaml -O offical-index.yaml</div><div class="line">cat offical-index.yaml | grep &quot;tgz&quot; | awk &apos;&#123;print $2&#125;&apos; &gt;&gt; helm-repo.list</div><div class="line">mkdir helm-repo</div><div class="line">cd helm-repo</div><div class="line">wget -c -t 3 -T 30 -i ../helm-repo.list</div><div class="line">helm repo index helm-repo --url http://127.0.0.1:8001/</div><div class="line">docker run -d --name helm-mirror -v $(pwd)/helm-repo:/usr/share/nginx/html -p 8001:80 nginx</div><div class="line"></div><div class="line">#update.sh</div><div class="line">#!/bin/sh</div><div class="line">https_proxy=your proxy addr</div><div class="line">cd helm-mirror</div><div class="line">rm offical-index.yaml helm-repo.list</div><div class="line">wget https://kubernetes-charts.storage.googleapis.com/index.yaml -O offical-index.yaml</div><div class="line">cat offical-index.yaml | grep &quot;tgz&quot; | awk &apos;&#123;print $2&#125;&apos; &gt;&gt; helm-repo.list</div><div class="line">cd helm-repo</div><div class="line">wget -c -t 3 -T 30 -i ../helm-repo.list</div><div class="line">helm repo index helm-repo --url http://127.0.0.1:8001/</div><div class="line">docker restart helm-mirror</div></pre></td></tr></table></figure><p></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;helm私有charts仓库进阶&quot;&gt;&lt;a href=&quot;#helm私有charts仓库进阶&quot; class=&quot;headerlink&quot; title=&quot;helm私有charts仓库进阶&quot;&gt;&lt;/a&gt;helm私有charts仓库进阶&lt;/h1&gt;&lt;h2 id=&quot;镜像官方仓库&quot;&gt;&lt;
      
    
    </summary>
    
      <category term="devops" scheme="https://taeroen.github.io/categories/devops/"/>
    
    
      <category term="kubernetes" scheme="https://taeroen.github.io/tags/kubernetes/"/>
    
      <category term="helm" scheme="https://taeroen.github.io/tags/helm/"/>
    
  </entry>
  
  <entry>
    <title>使用docker搭建gitlab服务</title>
    <link href="https://taeroen.github.io/post/2017-03-gitlab-docker.html"/>
    <id>https://taeroen.github.io/post/2017-03-gitlab-docker.html</id>
    <published>2017-03-06T14:18:48.000Z</published>
    <updated>2018-09-30T03:17:21.200Z</updated>
    
    <content type="html"><![CDATA[<h2 id="Quick-start"><a href="#Quick-start" class="headerlink" title="Quick start"></a>Quick start</h2><p>这是官方文档中的运行命令</p><p></p><p class="code-caption" data-lang="bash" data-line_number="frontend" data-trim_indent="backend" data-label_position="outer" data-labels_left="Code" data-labels_right=":" data-labels_copy="Copy Code"><span class="code-caption-label"></span></p><br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">sudo docker run --detach \</div><div class="line">    --hostname gitlab.example.com \</div><div class="line">    --publish 443:443 --publish 80:80 --publish 22:22 \</div><div class="line">    --name gitlab \</div><div class="line">    --restart always \</div><div class="line">    --volume /srv/gitlab/config:/etc/gitlab:Z \</div><div class="line">    --volume /srv/gitlab/logs:/var/<span class="built_in">log</span>/gitlab:Z \</div><div class="line">    --volume /srv/gitlab/data:/var/opt/gitlab:Z \</div><div class="line">    gitlab/gitlab-ce:latest</div></pre></td></tr></table></figure><p></p><p>这是我自己搭建时使用的命令</p><p></p><p class="code-caption" data-lang="bash" data-line_number="frontend" data-trim_indent="backend" data-label_position="outer" data-labels_left="Code" data-labels_right=":" data-labels_copy="Copy Code"><span class="code-caption-label"></span></p><br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">sudo docker run --detach \</div><div class="line">    --hostname git.taeroen.xyz \</div><div class="line">    --publish 1443:443 --publish 1080:80 --publish 1022:22 \</div><div class="line">    --name gitlab-ce \</div><div class="line">    --restart unless-stopped \</div><div class="line">    --volume /data/gitlab/config:/etc/gitlab:Z \</div><div class="line">    --volume /data/gitlab/logs:/var/<span class="built_in">log</span>/gitlab:Z \</div><div class="line">    --volume /data/gitlab/data:/var/opt/gitlab:Z \</div><div class="line">    gitlab/gitlab-ce:8.17.2-ce.0</div></pre></td></tr></table></figure><p></p><p>两者区别的地方就是可以自定义配置的地方，hostname只是个实例，如果有域名的话可以配成自己的，也可以更改自己的hosts来指向；端口的话随意，内部端口正确即可以；restart策略我更习惯使用unless-stopped，如果我手动stop后不会在下一次开机后重启；挂载目录的话可以看自己的需求，我习惯都挂载/data目录下；最后的tag建议改成一个固定值，实际上就是latest指向的值，这样避免升级时由于版本问题带来可能的bug。</p><h2 id="进阶"><a href="#进阶" class="headerlink" title="进阶"></a>进阶</h2><p>实际使用时需要在启动时传一些额外的参数，例如lfs，external_url，可以在启动时添加额外的参数。</p><p>例如:</p><p></p><p class="code-caption" data-lang="bash" data-line_number="frontend" data-trim_indent="backend" data-label_position="outer" data-labels_left="Code" data-labels_right=":" data-labels_copy="Copy Code"><span class="code-caption-label"></span></p><br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">GITLAB_OMNIBUS_CONFIG=<span class="string">"external_url 'https://git.taeroen.xyz:1443/';  gitlab_rails['lfs_enabled'] = true; nginx['redirect_http_to_https'] = true; nginx['ssl_certificate'] = '/etc/letsencrypt/live/git.taeroen.xyz/fullchain.pem';</span></div><div class="line">nginx['ssl_certificate_key'] = '/etc/letsencrypt/live/git.taeroen.xyz/privkey.pem';</div></pre></td></tr></table></figure><p></p><h2 id="配置Let’s-Encrypt"><a href="#配置Let’s-Encrypt" class="headerlink" title="配置Let’s Encrypt"></a>配置Let’s Encrypt</h2><p></p><p class="code-caption" data-lang="bash" data-line_number="frontend" data-trim_indent="backend" data-label_position="outer" data-labels_left="Code" data-labels_right=":" data-labels_copy="Copy Code"><span class="code-caption-label"></span></p><br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">git <span class="built_in">clone</span> https://github.com/letsencrypt/letsencrypt</div><div class="line"><span class="built_in">cd</span> letsencrypt</div><div class="line">./letsencrypt-auto --agree-tos --email taeroen@gmail.com certonly --webroot -w /usr/share/nginx/html/ <span class="_">-d</span> git.taeroen.xyz</div></pre></td></tr></table></figure><p></p><h2 id="最终配置"><a href="#最终配置" class="headerlink" title="最终配置"></a>最终配置</h2><p></p><p class="code-caption" data-lang="bash" data-line_number="frontend" data-trim_indent="backend" data-label_position="outer" data-labels_left="Code" data-labels_right=":" data-labels_copy="Copy Code"><span class="code-caption-label"></span></p><br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">sudo docker run --detach \</div><div class="line">    --hostname git.taeroen.xyz \</div><div class="line">    --publish 443:443 --publish 80:80 --publish 22:22 \</div><div class="line">    --name gitlab-ce \</div><div class="line">    --restart unless-stopped \</div><div class="line">    --volume /data/gitlab/config:/etc/gitlab:Z \</div><div class="line">    --volume /data/gitlab/logs:/var/<span class="built_in">log</span>/gitlab:Z \</div><div class="line">    --volume /data/gitlab/data:/var/opt/gitlab:Z \</div><div class="line">    --volume /data/git.taeroen.xyz/fullchain.pem:/etc/gitlab/ssl/git.taeroen.xyz.crt \</div><div class="line">    --volume /data/git.taeroen.xyz/privkey.pem:/etc/gitlab/ssl/git.taeroen.xyz.key \</div><div class="line">    --env GITLAB_OMNIBUS_CONFIG=<span class="string">"external_url 'https://git.taeroen.xyz/';gitlab_rails['lfs_enabled'] = true;"</span> \</div><div class="line">    gitlab/gitlab-ce:8.17.2-ce.0</div></pre></td></tr></table></figure><p></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;Quick-start&quot;&gt;&lt;a href=&quot;#Quick-start&quot; class=&quot;headerlink&quot; title=&quot;Quick start&quot;&gt;&lt;/a&gt;Quick start&lt;/h2&gt;&lt;p&gt;这是官方文档中的运行命令&lt;/p&gt;
&lt;p&gt;&lt;/p&gt;&lt;p class=&quot;
      
    
    </summary>
    
      <category term="git" scheme="https://taeroen.github.io/categories/git/"/>
    
    
      <category term="docker" scheme="https://taeroen.github.io/tags/docker/"/>
    
  </entry>
  
  <entry>
    <title>Linux下常见压缩文件的相关操作</title>
    <link href="https://taeroen.github.io/post/2017-03-linux-misc-command.html"/>
    <id>https://taeroen.github.io/post/2017-03-linux-misc-command.html</id>
    <published>2017-03-06T06:11:45.000Z</published>
    <updated>2018-09-30T03:17:21.206Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Linux下常见压缩文件的相关操作"><a href="#Linux下常见压缩文件的相关操作" class="headerlink" title="Linux下常见压缩文件的相关操作"></a>Linux下常见压缩文件的相关操作</h1><p>Linux常见的打包及压缩文件格式有tar,tar.gz,tar.xz,tar.bz2,zip,虽然命令不多，但是经常容器弄混，在这里用表格整理一下，方便记忆及操作。</p><ul><li>源文件:src.xxx</li><li>目标文件:dest.xxx</li><li>解压到指定目录:/tmp</li></ul><table><thead><tr><th>扩展文件名</th><th>解压缩</th><th>解压缩到指定目录</th><th>压缩</th><th>可选参数</th></tr></thead><tbody><tr><td>zip</td><td>unzip src.zip</td><td></td><td>unzip src.zip dest</td><td></td></tr><tr><td>gz</td><td>gnuzip src.gz</td><td></td><td>gzip src</td><td></td></tr><tr><td>tar</td><td>tar xf src.tar</td><td>tar xf src.tar -C /tmp</td><td>tar cf dest.tar src</td><td>-v 显示过程</td></tr><tr><td>tar.gz/tgz</td><td>tar zxf src.tar.gz</td><td>tar zxf dest.tar.gz -C /tmp</td><td>tar zcf dest.tar.gz src</td><td>-v 显示过程</td></tr><tr><td>tar.bz2</td><td>tar jxf src.tar.bz2</td><td>tar jxf dest.tar.bz2 -C /tmp</td><td>tar jcf dest.tar.bz2 src</td><td>-v 显示过程</td></tr></tbody></table>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;Linux下常见压缩文件的相关操作&quot;&gt;&lt;a href=&quot;#Linux下常见压缩文件的相关操作&quot; class=&quot;headerlink&quot; title=&quot;Linux下常见压缩文件的相关操作&quot;&gt;&lt;/a&gt;Linux下常见压缩文件的相关操作&lt;/h1&gt;&lt;p&gt;Linux常见的打包
      
    
    </summary>
    
      <category term="linux" scheme="https://taeroen.github.io/categories/linux/"/>
    
    
      <category term="linux" scheme="https://taeroen.github.io/tags/linux/"/>
    
  </entry>
  
  <entry>
    <title>Debian8 内核编译</title>
    <link href="https://taeroen.github.io/post/2016-12-linux-kernel-compile-debian.html"/>
    <id>https://taeroen.github.io/post/2016-12-linux-kernel-compile-debian.html</id>
    <published>2016-12-17T05:30:48.000Z</published>
    <updated>2018-09-30T03:17:21.205Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Debian8-内核编译"><a href="#Debian8-内核编译" class="headerlink" title="Debian8 内核编译"></a>Debian8 内核编译</h1><p>本文介绍两种编译linux内核的方式，一种是debian发行版打过补丁和更改过配置的内核，一种是linux的原版内核。</p><h2 id="1-准备编译环境"><a href="#1-准备编译环境" class="headerlink" title="1 准备编译环境"></a>1 准备编译环境</h2><p>安装编译工具链</p><p></p><p class="code-caption" data-lang="bash" data-line_number="frontend" data-trim_indent="backend" data-label_position="outer" data-labels_left="Code" data-labels_right=":" data-labels_copy="Copy Code"><span class="code-caption-label"></span></p><br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># apt-get install build-essential kernel-package libncurses5-dev -y</span></div></pre></td></tr></table></figure><p></p><h2 id="2-下载Debian发行版内核源码"><a href="#2-下载Debian发行版内核源码" class="headerlink" title="2 下载Debian发行版内核源码"></a>2 下载Debian发行版内核源码</h2><p></p><p class="code-caption" data-lang="bash" data-line_number="frontend" data-trim_indent="backend" data-label_position="outer" data-labels_left="Code" data-labels_right=":" data-labels_copy="Copy Code"><span class="code-caption-label"></span></p><br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># apt-get install linux-source-3.16 -y</span></div></pre></td></tr></table></figure><p></p><p>内核源码包安装完成后下载到/user/src目录下</p><p></p><p class="code-caption" data-lang="bash" data-line_number="frontend" data-trim_indent="backend" data-label_position="outer" data-labels_left="Code" data-labels_right=":" data-labels_copy="Copy Code"><span class="code-caption-label"></span></p><br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">$ ls /usr/src -al | grep linux-source-3.16</div><div class="line">rw-r--r-- 1 root root 81957884 - - - linux-source-3.16.tar.xz</div></pre></td></tr></table></figure><p></p><p>解压源码包</p><p></p><p class="code-caption" data-lang="bash" data-line_number="frontend" data-trim_indent="backend" data-label_position="outer" data-labels_left="Code" data-labels_right=":" data-labels_copy="Copy Code"><span class="code-caption-label"></span></p><br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">$ mkdir -p ~/build/kernel</div><div class="line">$ <span class="built_in">cd</span> ~/build/kernel</div><div class="line">$ tar -Jxvf /user/src/linux-source-3.16.tar.xz</div></pre></td></tr></table></figure><p></p><h2 id="3-内核编译"><a href="#3-内核编译" class="headerlink" title="3 内核编译"></a>3 内核编译</h2><p>按需求更改配置,如果不想更改配置，直接双击ESC保存.config退出即可</p><p></p><p class="code-caption" data-lang="bash" data-line_number="frontend" data-trim_indent="backend" data-label_position="outer" data-labels_left="Code" data-labels_right=":" data-labels_copy="Copy Code"><span class="code-caption-label"></span></p><br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ make menuconfig</div></pre></td></tr></table></figure><p></p><p>编译内核</p><p></p><p class="code-caption" data-lang="bash" data-line_number="frontend" data-trim_indent="backend" data-label_position="outer" data-labels_left="Code" data-labels_right=":" data-labels_copy="Copy Code"><span class="code-caption-label"></span></p><br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ make deb-pjg</div></pre></td></tr></table></figure><p></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;Debian8-内核编译&quot;&gt;&lt;a href=&quot;#Debian8-内核编译&quot; class=&quot;headerlink&quot; title=&quot;Debian8 内核编译&quot;&gt;&lt;/a&gt;Debian8 内核编译&lt;/h1&gt;&lt;p&gt;本文介绍两种编译linux内核的方式，一种是debian发行
      
    
    </summary>
    
      <category term="linux" scheme="https://taeroen.github.io/categories/linux/"/>
    
    
      <category term="linux" scheme="https://taeroen.github.io/tags/linux/"/>
    
  </entry>
  
</feed>
